{"version":3,"sources":["webpack:///webpack/bootstrap dc88e824553835ee4c03","webpack:///./frontend/ball.js","webpack:///./frontend/field.js","webpack:///./frontend/game.js","webpack:///./frontend/paddle.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AChEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;;;;;;;AC3HA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA,uBAAuB,aAAa;AACpC;AACA;AACA;AACA;;AAEA;AACA;;AAEA,oBAAoB,qBAAqB;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+BAA+B,+BAA+B;AAC9D,+BAA+B,iCAAiC;AAChE,+BAA+B,iCAAiC;AAChE,+BAA+B,iCAAiC;AAChE,+BAA+B,iCAAiC;AAChE,+BAA+B,iCAAiC;AAChE,+BAA+B,iCAAiC;AAChE,+BAA+B,iCAAiC;AAChE,+BAA+B,iCAAiC;;AAEhE;AACA;AACA;AACA;;AAEA,6BAA6B,uCAAuC;AACpE,6BAA6B,wCAAwC;AACrE,6BAA6B,yCAAyC;AACtE,6BAA6B,wCAAwC;;AAErE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;AChQA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,2DAA2D,KAAK;AAChE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gDAAgD,KAAK;AACrD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAiB,qBAAqB;AACtC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,mDAAmD,KAAK;AACxD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,0DAA0D,KAAK;AAC/D;AACA;AACA;;AAEA;AACA;AACA,WAAW,KAAK;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,YAAY,WAAW;AACvB,WAAW,KAAK;AAChB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,yBAAyB,WAAW;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;ACrQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,sBAAsB,6CAA6C;AACnE;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,sBAAsB,6CAA6C;AACnE;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,sBAAsB,+CAA+C;AACrE;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA","file":"./bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap dc88e824553835ee4c03","const INITIAL_RADIUS = 35;\n\nclass Ball {\n\tconstructor(stage, maxDistance) {\n\t\tthis.stage = stage;\n\t\tthis.maxDistance = maxDistance;\n\n\t\tthis.shape = new createjs.Shape();\n\n\t\tthis.reset();\n\t}\n\n\tadjustForRadius() {\n\t\tif (this.rawX > 400) {\n\t\t\tthis.shape.x -= (this.radius * (this.rawX - 400)) / 312;\n\t\t} else if (this.rawX < 400) {\n\t\t\tthis.shape.x += (this.radius * (400 - this.rawX)) / 312;\n\t\t}\n\n\t\tif (this.rawY > 300) {\n\t\t\tthis.shape.y -= (this.radius * (this.rawY - 300)) / 209;\n\t\t} else if (this.rawY < 300) {\n\t\t\tthis.shape.y += (this.radius * (300 - this.rawY)) / 209;\n\t\t}\n\t}\n\n\tapplyPerspective() {\n\t\tconst distanceFactor = this.distance / this.maxDistance;\n\n\t\tthis.shape.x = this.rawX - (this.rawX - this.farX) * distanceFactor;\n\t\tthis.shape.y = this.rawY - (this.rawY - this.farY) * distanceFactor;\n\t}\n\n\tapplySpin() {\n\t\tif (this.direction === \"out\") {\n\t\t\tthis.xVelocity -= this.xSpin / this.maxDistance;\n\t\t\tthis.yVelocity -= this.ySpin / this.maxDistance;\n\t\t} else {\n\t\t\tthis.xVelocity += this.xSpin / this.maxDistance;\n\t\t\tthis.yVelocity += this.ySpin / this.maxDistance;\n\t\t}\n\t}\n\n\tapplyVelocity() {\n\t\tthis.rawX += this.xVelocity;\n\t\tthis.farX = ((this.rawX - 400) * 79) / 312 + 400;\n\n\t\tthis.rawY += this.yVelocity;\n\t\tthis.farY = ((this.rawY - 300) * 53) / 209 + 300;\n\t}\n\n\tdraw() {\n\t\tthis.fillCommand = this.shape.graphics.beginRadialGradientFill(\n\t\t\t[\"#f7e2ff\", \"#432a4c\"],\n\t\t\t[0, 1],\n\t\t\t-8,\n\t\t\t-8,\n\t\t\t0,\n\t\t\t0,\n\t\t\t0,\n\t\t\t35\n\t\t).command;\n\t\tthis.silverGradient = this.fillCommand.style;\n\t\tthis.shape.graphics.drawCircle(0, 0, INITIAL_RADIUS);\n\n\t\tthis.stage.addChild(this.shape);\n\t}\n\n\tmove() {\n\t\tthis.updateDistance();\n\t\tthis.scaleBall();\n\t\tthis.applySpin();\n\t\tthis.applyVelocity();\n\t\tthis.applyPerspective();\n\t\tthis.adjustForRadius();\n\n\t\tthis.stage.update();\n\t}\n\n\treset() {\n\t\tthis.shape.x = 400;\n\t\tthis.shape.y = 300;\n\n\t\tthis.distance = 0;\n\t\tthis.direction = \"out\";\n\t\tthis.radius = INITIAL_RADIUS;\n\n\t\tthis.xVelocity = 0;\n\t\tthis.yVelocity = 0;\n\n\t\tthis.xSpin = 5 * (Math.random() - 0.5);\n\t\tthis.ySpin = 5 * (Math.random() - 0.5);\n\n\t\tthis.rawX = 400;\n\t\tthis.rawY = 300;\n\n\t\tthis.farX = 400;\n\t\tthis.farY = 300;\n\n\t\tthis.shape.scaleX = 1;\n\t\tthis.shape.scaleY = 1;\n\n\t\tif (this.fillCommand) {\n\t\t\tthis.fillCommand.style = this.silverGradient;\n\t\t}\n\t}\n\n\tscaleBall() {\n\t\tthis.shape.scaleX = 1 - (this.distance * 3) / (4 * this.maxDistance);\n\t\tthis.shape.scaleY = 1 - (this.distance * 3) / (4 * this.maxDistance);\n\n\t\tthis.radius = 35 * this.shape.scaleX;\n\t}\n\n\tupdateDistance() {\n\t\tif (this.direction === \"out\") {\n\t\t\tthis.distance += 1;\n\t\t} else {\n\t\t\tthis.distance -= 1;\n\t\t}\n\t}\n}\n\nmodule.exports = Ball;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./frontend/ball.js\n// module id = 0\n// module chunks = 0","const Ball = require(\"./ball.js\");\nconst Paddle = require(\"./paddle.js\");\n\nconst CENTER_X = 400;\nconst CENTER_Y = 300;\n\nconst HUMAN_COLOR = \"royalblue\";\nconst CPU_COLOR = \"#cc0000\";\n\nconst HUMAN_PADDLE_WIDTH = 120;\nconst HUMAN_PADDLE_HEIGHT = 80;\nconst CPU_PADDLE_WIDTH = 30;\nconst CPU_PADDLE_HEIGHT = 20;\n\nclass Field {\n\tconstructor(stage, game) {\n\t\tthis.stage = stage;\n\t\tthis.game = game;\n\n\t\tthis.ball = new Ball(this.stage, 60);\n\t\tthis.humanPaddle = new Paddle(\n\t\t\tHUMAN_PADDLE_WIDTH,\n\t\t\tHUMAN_PADDLE_HEIGHT,\n\t\t\tHUMAN_COLOR,\n\t\t\t\"near\",\n\t\t\tthis.stage\n\t\t);\n\t\tthis.cpuPaddle = new Paddle(\n\t\t\tCPU_PADDLE_WIDTH,\n\t\t\tCPU_PADDLE_HEIGHT,\n\t\t\tCPU_COLOR,\n\t\t\t\"far\",\n\t\t\tthis.stage\n\t\t);\n\n\t\tthis.maxDistance = 60;\n\t\tthis.cpuTrackingRatio = 30;\n\n\t\tthis.ticker = createjs.Ticker;\n\t\tthis.ticker.setFPS(60);\n\n\t\tthis.audio = false;\n\n\t\tthis.nearHit = new Audio(\"./asset/sounds/nearhit.wav\");\n\t\tthis.farHit = new Audio(\"./asset/sounds/farhit.wav\");\n\t\tthis.vWallHit = new Audio(\"./asset/sounds/wallhit.wav\");\n\t\tthis.hWallHit = new Audio(\"./asset/sounds/wallhit0.wav\");\n\t\tthis.goal = new Audio(\"./asset/sounds/goal.wav\");\n\n\t\tthis.renderField();\n\t\tthis.renderPieces();\n\t}\n\n\tdetectWallBounce() {\n\t\tif (this.ball.rawX >= 712 || this.ball.rawX <= 88) {\n\t\t\tthis.ball.xVelocity = this.ball.xVelocity * -1;\n\t\t\tthis.ball.xSpin = 0;\n\t\t\tif (this.audio) {\n\t\t\t\tthis.vWallHit.load();\n\t\t\t\tthis.vWallHit.play();\n\t\t\t}\n\t\t}\n\n\t\tif (this.ball.rawY >= 509 || this.ball.rawY <= 91) {\n\t\t\tthis.ball.yVelocity = this.ball.yVelocity * -1;\n\t\t\tthis.ball.ySpin = 0;\n\t\t\tif (this.audio) {\n\t\t\t\tthis.vWallHit.load();\n\t\t\t\tthis.vWallHit.play();\n\t\t\t}\n\t\t}\n\t}\n\n\tdetectGoalOrHit() {\n\t\tif (this.ball.distance === this.maxDistance) {\n\t\t\tthis.detectCpuHit();\n\t\t\tthis.ball.direction = \"in\";\n\t\t} else if (this.ball.distance === 0) {\n\t\t\tthis.detectHumanHit();\n\t\t\tthis.ball.direction = \"out\";\n\t\t}\n\t}\n\n\tdrawRectangle(shape, { x, y, w, h }) {\n\t\tshape.graphics.beginStroke(\"gray\");\n\t\tshape.graphics.setStrokeStyle(3);\n\t\tshape.snapToPixel = true;\n\t\tshape.graphics.drawRect(x, y, w, h);\n\n\t\tthis.stage.addChild(shape);\n\t}\n\n\tdrawCorner(shape, { mtx, mty, ltx, lty }) {\n\t\tshape.graphics.beginStroke(\"gray\");\n\t\tshape.graphics.setStrokeStyle(4);\n\t\tshape.snapToPixel = true;\n\t\tshape.graphics.moveTo(mtx, mty);\n\t\tshape.graphics.lineTo(ltx, lty);\n\n\t\tthis.stage.addChild(shape);\n\t}\n\n\tdrawBallMarker() {\n\t\tconst ballMarker = new createjs.Shape();\n\n\t\tballMarker.graphics.beginStroke(\"ghostwhite\");\n\t\tballMarker.graphics.setStrokeStyle(3);\n\t\tballMarker.snapToPixel = true;\n\t\tballMarker.graphics.drawRect(88, 91, 624, 418);\n\t\tballMarker.name = \"ballMarker\";\n\n\t\tthis.stage.addChild(ballMarker);\n\t}\n\n\tmovePaddles() {\n\t\tthis.humanPaddle.move(this.ball);\n\t\tthis.cpuPaddle.move(this.ball, this.cpuTrackingRatio);\n\t\tthis.stage.update();\n\t}\n\n\trenderPieces() {\n\t\tthis.cpuPaddle.draw();\n\t\tthis.ball.draw();\n\t\tthis.humanPaddle.draw();\n\t\tthis.drawBallMarker();\n\t\tthis.ticker.addEventListener(\"tick\", this.movePaddles.bind(this));\n\t}\n\n\trenderField() {\n\t\tconst border1 = new createjs.Shape();\n\t\tconst border2 = new createjs.Shape();\n\t\tconst border3 = new createjs.Shape();\n\t\tconst border4 = new createjs.Shape();\n\t\tconst border5 = new createjs.Shape();\n\t\tconst border6 = new createjs.Shape();\n\t\tconst border7 = new createjs.Shape();\n\t\tconst border8 = new createjs.Shape();\n\t\tconst border9 = new createjs.Shape();\n\n\t\tthis.drawRectangle(border1, { x: 88, y: 91, w: 624, h: 418 });\n\t\tthis.drawRectangle(border2, { x: 146, y: 130, w: 508, h: 340 });\n\t\tthis.drawRectangle(border3, { x: 195, y: 162, w: 410, h: 276 });\n\t\tthis.drawRectangle(border4, { x: 234, y: 190, w: 332, h: 221 });\n\t\tthis.drawRectangle(border5, { x: 263, y: 208, w: 275, h: 184 });\n\t\tthis.drawRectangle(border6, { x: 283, y: 222, w: 234, h: 157 });\n\t\tthis.drawRectangle(border7, { x: 299, y: 233, w: 202, h: 135 });\n\t\tthis.drawRectangle(border8, { x: 312, y: 240, w: 176, h: 120 });\n\t\tthis.drawRectangle(border9, { x: 322, y: 247, w: 158, h: 106 });\n\n\t\tlet cornerNW = new createjs.Shape();\n\t\tlet cornerNE = new createjs.Shape();\n\t\tlet cornerSE = new createjs.Shape();\n\t\tlet cornerSW = new createjs.Shape();\n\n\t\tthis.drawCorner(cornerNW, { mtx: 88, mty: 91, ltx: 322, lty: 247 });\n\t\tthis.drawCorner(cornerNW, { mtx: 712, mty: 91, ltx: 479, lty: 247 });\n\t\tthis.drawCorner(cornerNW, { mtx: 712, mty: 509, ltx: 479, lty: 353 });\n\t\tthis.drawCorner(cornerNW, { mtx: 88, mty: 509, ltx: 322, lty: 353 });\n\n\t\tthis.stage.update();\n\t}\n\n\tdetectHumanHit() {\n\t\tif (this.humanPaddle.hit(this.ball)) {\n\t\t\tif (this.audio) {\n\t\t\t\tthis.nearHit.load();\n\t\t\t\tthis.nearHit.play();\n\t\t\t}\n\t\t\tthis.humanPaddle.fillCommand.style = \"blue\";\n\t\t\tsetTimeout(() => (this.humanPaddle.fillCommand.style = HUMAN_COLOR), 100);\n\t\t\tthis.getSpin();\n\t\t} else {\n\t\t\tthis.ball.fillCommand.style = CPU_COLOR;\n\t\t\tif (this.audio) {\n\t\t\t\tthis.goal.load();\n\t\t\t\tthis.goal.play();\n\t\t\t}\n\t\t\tthis.ticker.removeAllEventListeners(\"tick\");\n\t\t\tthis.ticker.addEventListener(\"tick\", this.movePaddles.bind(this));\n\t\t\tthis.game.resetPieces(\"human\");\n\t\t}\n\t}\n\n\tgetSpin() {\n\t\tlet [xSpin, ySpin] = this.humanPaddle.spinVector();\n\n\t\tthis.ball.xSpin += xSpin;\n\t\tthis.ball.ySpin += ySpin;\n\t}\n\n\tdetectCpuHit() {\n\t\tif (this.cpuPaddle.hit(this.ball)) {\n\t\t\tif (this.audio) {\n\t\t\t\tthis.farHit.load();\n\t\t\t\tthis.farHit.play();\n\t\t\t}\n\t\t\tthis.cpuPaddle.fillCommand.style = \"hotpink\";\n\t\t\tsetTimeout(() => (this.cpuPaddle.fillCommand.style = CPU_COLOR), 100);\n\t\t} else {\n\t\t\tthis.ball.fillCommand.style = HUMAN_COLOR;\n\t\t\tif (this.audio) {\n\t\t\t\tthis.goal.load();\n\t\t\t\tthis.goal.play();\n\t\t\t}\n\t\t\tthis.ticker.removeAllEventListeners(\"tick\");\n\t\t\tthis.ticker.addEventListener(\"tick\", this.movePaddles.bind(this));\n\t\t\tthis.game.resetPieces(\"cpu\");\n\t\t}\n\t}\n\n\tupdateBallMarker() {\n\t\tconst ballMarker = this.stage.getChildByName(\"ballMarker\");\n\n\t\tconst markerX = 88 + (this.ball.distance * (321 - 88)) / this.maxDistance;\n\t\tconst markerY = 91 + (this.ball.distance * (247 - 91)) / this.maxDistance;\n\t\tconst markerW = 624 - (this.ball.distance * (624 - 158)) / this.maxDistance;\n\t\tconst markerH = 418 - (this.ball.distance * (418 - 106)) / this.maxDistance;\n\n\t\tballMarker.graphics\n\t\t\t.clear()\n\t\t\t.beginStroke(\"ghostwhite\")\n\t\t\t.drawRect(markerX, markerY, markerW, markerH);\n\t}\n\n\thitBall(e = null) {\n\t\tif (this.humanPaddle.hit(this.ball)) {\n\t\t\tif (e) e.remove();\n\t\t\tif (this.audio) {\n\t\t\t\tthis.nearHit.load();\n\t\t\t\tthis.nearHit.play();\n\t\t\t}\n\t\t\tthis.getSpin();\n\t\t\tif (this.ball.xSpin > 15) {\n\t\t\t\tthis.ball.xSpin = 15;\n\t\t\t}\n\t\t\tif (this.ball.xSpin < -15) {\n\t\t\t\tthis.ball.xSpin = -15;\n\t\t\t}\n\t\t\tif (this.ball.ySpin > 15) {\n\t\t\t\tthis.ball.ySpin = 15;\n\t\t\t}\n\t\t\tif (this.ball.ySpin < -15) {\n\t\t\t\tthis.ball.ySpin = -15;\n\t\t\t}\n\t\t\tthis.ticker.addEventListener(\"tick\", this.ballActions.bind(this));\n\t\t}\n\t}\n\n\tballActions() {\n\t\tthis.ball.move();\n\t\tthis.detectWallBounce();\n\t\tthis.detectGoalOrHit();\n\t\tthis.updateBallMarker();\n\t}\n}\n\nmodule.exports = Field;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./frontend/field.js\n// module id = 1\n// module chunks = 0","import Field from \"./field\";\nimport Ball from \"./ball\";\n\nconst FONT = \"Coda\";\n\nclass Game {\n\tconstructor() {\n\t\tthis.stage = this.stage || new createjs.Stage(\"myCanvas\");\n\t\tthis.stage.canvas.style.cursor = \"display\";\n\n\t\tthis.cpuStrikes = 3;\n\t\tthis.humanStrikes = 5;\n\t\tthis.level = 1;\n\n\t\tthis.field = new Field(this.stage, this);\n\n\t\tthis.playDemo();\n\t\tthis.handleKeydown();\n\t}\n\n\tplayDemo() {\n\t\tthis.field.ball.xSpin = -20;\n\t\tthis.field.ball.ySpin = -30;\n\t\tthis.field.ball.maxDistance = 50;\n\t\tthis.field.maxDistance = 50;\n\t\tthis.field.hitBall();\n\t\tthis.buildInstructions();\n\t\tthis.flashInstructions();\n\n\t\tthis.startGame = this.startGame.bind(this);\n\t\tdocument.addEventListener(\"mousedown\", this.startGame);\n\t}\n\n\tbuildInstructions() {\n\t\tconst text = new createjs.Text(\"CLICK TO START\", `20px ${FONT}`, \"#FA9F42\");\n\t\ttext.x = 330;\n\t\ttext.y = 462;\n\t\ttext.textBaseline = \"alphabetic\";\n\t\tthis.instructions = text;\n\t}\n\n\tflashInstructions() {\n\t\tthis.interval = setInterval(() => this.toggleChild(this.instructions), 500);\n\t}\n\n\tclearInstructions() {\n\t\tclearInterval(this.interval);\n\t\tthis.removeChild(this.instructions);\n\t}\n\n\tremoveChild(child) {\n\t\tif (this.stage.contains(child)) {\n\t\t\tthis.stage.removeChild(child);\n\t\t}\n\t\tthis.stage.update();\n\t}\n\n\ttoggleChild(child) {\n\t\tif (this.stage.contains(child)) {\n\t\t\tthis.stage.removeChild(child);\n\t\t} else {\n\t\t\tthis.stage.addChild(child);\n\t\t}\n\t\tthis.stage.update();\n\t}\n\n\tstartGame() {\n\t\tthis.clearInstructions();\n\t\tthis.buildCpuScore();\n\t\tthis.buildHumanScore();\n\t\tthis.printLevel();\n\t\tdocument.removeEventListener(\"mousedown\", this.startGame);\n\t\tthis.field.audio = true;\n\t\tthis.field.humanPaddle.demo = false;\n\t\tthis.field.cpuPaddle.demo = false;\n\t\tthis.restart();\n\t}\n\n\ttoggleAudio(e) {\n\t\tif (e.keyCode === 109) {\n\t\t\tconsole.log(\"toggle!\");\n\t\t\tthis.field.audio = !this.field.audio;\n\t\t}\n\t}\n\n\thandleKeydown() {\n\t\tdocument.addEventListener(\"keypress\", this.toggleAudio.bind(this));\n\t}\n\n\tbuildCpuScore() {\n\t\tconst text = new createjs.Text(\"CPU\", `20px ${FONT}`, \"ghostwhite\");\n\t\ttext.x = 100;\n\t\ttext.y = 70;\n\t\ttext.textBaseline = \"alphabetic\";\n\n\t\tthis.stage.addChild(text);\n\t\tthis.buildCpuStrikes();\n\n\t\tthis.stage.update();\n\t}\n\n\tbuildCpuStrikes() {\n\t\tthis.cpuStrikeShapes = [];\n\t\tfor (let i = 0; i < this.cpuStrikes; i++) {\n\t\t\tthis.cpuStrikeShapes[i] = new createjs.Shape();\n\t\t\tthis.cpuStrikeShapes[i].graphics\n\t\t\t\t.beginFill(\"#cc0000\")\n\t\t\t\t.drawCircle(160 + i * 25, 62, 10);\n\n\t\t\tthis.stage.addChild(this.cpuStrikeShapes[i]);\n\t\t}\n\t}\n\n\tbuildHumanScore() {\n\t\tconst text = new createjs.Text(\"Player\", `20px ${FONT}`, \"ghostwhite\");\n\t\ttext.x = 650;\n\t\ttext.y = 70;\n\t\ttext.textBaseline = \"alphabetic\";\n\n\t\tthis.stage.addChild(text);\n\t\tthis.buildHumanStrikes();\n\n\t\tthis.stage.update();\n\t}\n\n\tbuildHumanStrikes() {\n\t\tthis.humanStrikeShapes = [];\n\t\tfor (let i = 0; i < this.humanStrikes; i++) {\n\t\t\tthis.humanStrikeShapes[i] = new createjs.Shape();\n\t\t\tthis.humanStrikeShapes[i].graphics\n\t\t\t\t.beginFill(\"royalblue\")\n\t\t\t\t.drawCircle(630 - i * 25, 62, 10);\n\n\t\t\tthis.stage.addChild(this.humanStrikeShapes[i]);\n\t\t}\n\t}\n\n\tprintGameOver() {\n\t\tconst frame = new createjs.Shape();\n\t\tframe.graphics.beginFill(\"black\").drawRoundRect(255, 250, 290, 100, 5);\n\n\t\tconst gameOver = new createjs.Text(`Game Over`, `42px ${FONT}`, \"#E0E0E2\");\n\t\tgameOver.x = 290;\n\t\tgameOver.y = 300;\n\t\tgameOver.textBaseline = \"alphabetic\";\n\n\t\tconst spaceText = new createjs.Text(\n\t\t\t`Click to restart`,\n\t\t\t`22px ${FONT}`,\n\t\t\t\"ghostwhite\"\n\t\t);\n\t\tspaceText.x = 330;\n\t\tspaceText.y = 330;\n\t\tspaceText.textBaseline = \"alphabetic\";\n\n\t\tthis.stage.addChild(frame);\n\t\tthis.stage.addChild(gameOver);\n\t\tthis.stage.addChild(spaceText);\n\n\t\tthis.stage.update();\n\n\t\tthis.stage.on(\"mousedown\", this.restart.bind(this));\n\t}\n\n\tprintLevel() {\n\t\tconst frame = new createjs.Shape();\n\t\tframe.graphics.beginFill(\"black\").drawRoundRect(298, 530, 200, 45, 5);\n\n\t\tconst text = new createjs.Text(\n\t\t\t`Level ${this.level}`,\n\t\t\t`40px ${FONT}`,\n\t\t\t\"#FA9F42\"\n\t\t);\n\t\ttext.x = 340;\n\t\ttext.y = 565;\n\t\ttext.textBaseline = \"alphabetic\";\n\t\ttext.name = \"level\";\n\n\t\tthis.stage.addChild(frame);\n\t\tthis.stage.addChild(text);\n\n\t\tthis.stage.update();\n\t}\n\n\tresetPieces(loser) {\n\t\tif (loser === \"cpu\") {\n\t\t\tthis.updateCpuStrikes();\n\t\t} else {\n\t\t\tthis.updateHumanStrikes();\n\t\t}\n\t}\n\n\trestart() {\n\t\tthis.stage.removeAllEventListeners();\n\t\tthis.field.ticker.removeAllEventListeners();\n\t\tthis.stage.removeAllChildren();\n\n\t\tthis.cpuStrikes = 3;\n\t\tthis.humanStrikes = 5;\n\t\tthis.level = 1;\n\n\t\tlet audio = this.field.audio;\n\n\t\tthis.field = new Field(this.stage, this);\n\t\tthis.field.humanPaddle.demo = false;\n\t\tthis.field.cpuPaddle.demo = false;\n\t\tthis.stage.canvas.style.cursor = \"none\";\n\t\tthis.field.audio = audio;\n\n\t\tthis.buildCpuScore();\n\t\tthis.buildHumanScore();\n\t\tthis.printLevel();\n\t\tthis.setStage();\n\t}\n\n\tsetStage() {\n\t\tconst ballMarker = this.stage.getChildByName(\"ballMarker\");\n\n\t\tthis.field.ball.reset();\n\t\tballMarker.graphics.clear().beginStroke(\"#444\").drawRect(88, 91, 624, 418);\n\t\tthis.stage.on(\"stagemousedown\", this.field.hitBall.bind(this.field));\n\t}\n\n\tupdateCpuStrikes() {\n\t\tif (this.cpuStrikes > 1) {\n\t\t\tthis.cpuStrikeShapes[this.cpuStrikes - 1].graphics.clear();\n\t\t\tthis.cpuStrikes -= 1;\n\t\t} else {\n\t\t\tconst level = this.stage.getChildByName(\"level\");\n\t\t\tthis.cpuStrikeShapes[this.cpuStrikes - 1].graphics.clear();\n\t\t\tthis.cpuStrikes -= 1;\n\t\t\tthis.level += 1;\n\t\t\tlevel.text = `Level ${this.level}`;\n\t\t\tthis.field.cpuTrackingRatio = this.field.cpuTrackingRatio / 1.4;\n\t\t\tthis.cpuStrikes = 3;\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.field.ball.maxDistance = Math.floor(\n\t\t\t\t\tthis.field.ball.maxDistance * 0.95\n\t\t\t\t);\n\t\t\t\tthis.field.maxDistance = this.field.ball.maxDistance;\n\t\t\t}, 1000);\n\t\t\tsetTimeout(this.buildCpuStrikes.bind(this), 1000);\n\t\t}\n\t\tsetTimeout(this.setStage.bind(this), 1000);\n\t}\n\n\tupdateHumanStrikes() {\n\t\tif (this.humanStrikes > 0) {\n\t\t\tthis.humanStrikeShapes[this.humanStrikes - 1].graphics.clear();\n\t\t\tthis.humanStrikes -= 1;\n\t\t\tsetTimeout(this.setStage.bind(this), 1000);\n\t\t} else {\n\t\t\tsetTimeout(this.printGameOver.bind(this), 1000);\n\t\t}\n\t}\n}\n\nconst init = () => {\n\tconst game = new Game();\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", init);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./frontend/game.js\n// module id = 2\n// module chunks = 0","class Paddle {\n\tconstructor(width, height, color, type, stage) {\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.color = color;\n\t\tthis.type = type;\n\t\tthis.stage = stage;\n\t\tthis.demo = true;\n\n\t\tthis.shape = new createjs.Shape();\n\t}\n\n\tcenter() {\n\t\tthis.shape.x -= this.width / 2;\n\t\tthis.shape.y -= this.height / 2;\n\t}\n\n\tdraw() {\n\t\tlet borderRadius;\n\t\tlet strokeStyle;\n\t\tif (this.type === \"near\") {\n\t\t\tborderRadius = 10;\n\t\t\tstrokeStyle = 4;\n\t\t} else {\n\t\t\tborderRadius = 3;\n\t\t\tstrokeStyle = 2;\n\t\t}\n\n\t\tthis.fillCommand = this.shape.graphics\n\t\t\t.beginStroke(this.color)\n\t\t\t.setStrokeStyle(strokeStyle)\n\t\t\t.beginFill(this.color).command;\n\t\tthis.shape.alpha = 0.5;\n\t\tthis.shape.graphics.drawRoundRect(\n\t\t\t0,\n\t\t\t0,\n\t\t\tthis.width,\n\t\t\tthis.height,\n\t\t\tborderRadius\n\t\t);\n\t\tthis.prevX = 400;\n\t\tthis.prevY = 300;\n\t\tthis.shape.x = 400;\n\t\tthis.shape.y = 300;\n\n\t\tthis.stage.addChild(this.shape);\n\t}\n\n\tenforceBounds(bounds) {\n\t\tif (this.shape.x + this.width > bounds.right) {\n\t\t\tthis.shape.x = bounds.right - this.width;\n\t\t} else if (this.shape.x < bounds.left) {\n\t\t\tthis.shape.x = bounds.left;\n\t\t}\n\n\t\tif (this.shape.y + this.height > bounds.bottom) {\n\t\t\tthis.shape.y = bounds.bottom - this.height;\n\t\t} else if (this.shape.y < bounds.top) {\n\t\t\tthis.shape.y = bounds.top;\n\t\t}\n\t}\n\n\thit(ball) {\n\t\tif (\n\t\t\tball.shape.x - ball.radius <= this.shape.x + this.width &&\n\t\t\tball.shape.x + ball.radius >= this.shape.x &&\n\t\t\tball.shape.y - ball.radius <= this.shape.y + this.height &&\n\t\t\tball.shape.y + ball.radius >= this.shape.y\n\t\t) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tmove(ball, trackingRatio = null) {\n\t\tif (this.type === \"near\") {\n\t\t\tthis.demo ? this.moveDemoPaddle(ball) : this.moveNearPaddle();\n\t\t} else {\n\t\t\tthis.demo\n\t\t\t\t? this.moveFarPaddle(ball, -4)\n\t\t\t\t: this.moveFarPaddle(ball, trackingRatio);\n\t\t}\n\t}\n\n\tmoveDemoPaddle(ball) {\n\t\tthis.prevX = this.shape.x;\n\t\tthis.prevY = this.shape.y;\n\n\t\tthis.shape.x = ball.shape.x;\n\t\tthis.shape.y = ball.shape.y;\n\n\t\tthis.center();\n\t\tthis.enforceBounds({ top: 91, right: 712, bottom: 509, left: 88 });\n\t}\n\n\tmoveNearPaddle() {\n\t\tthis.prevX = this.shape.x;\n\t\tthis.prevY = this.shape.y;\n\n\t\tthis.shape.x = this.stage.mouseX;\n\t\tthis.shape.y = this.stage.mouseY;\n\n\t\tthis.center();\n\t\tthis.enforceBounds({ top: 91, right: 712, bottom: 509, left: 88 });\n\t}\n\n\tmoveFarPaddle(ball, trackingRatio) {\n\t\tconst difX = ball.farX - this.shape.x - this.width / 2;\n\t\tconst difY = ball.farY - this.shape.y - this.height / 2;\n\n\t\tthis.shape.x += difX / (5 + trackingRatio);\n\t\tthis.shape.y += difY / (5 + trackingRatio);\n\n\t\tthis.enforceBounds({ top: 247, right: 480, bottom: 353, left: 322 });\n\t}\n\n\tspinVector() {\n\t\tconst xSpin = this.shape.x - this.prevX;\n\t\tconst ySpin = this.shape.y - this.prevY;\n\n\t\treturn [xSpin, ySpin];\n\t}\n}\n\nmodule.exports = Paddle;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./frontend/paddle.js\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}